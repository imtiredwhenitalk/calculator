<!DOCTYPE html>
<html lang="uk">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Калькулятор</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body class="app-bg text-slate-100">
        <main class="min-h-screen px-4 py-8">
            <div class="max-w-5xl mx-auto flex flex-col gap-6">
                <header class="panel panel-compact" aria-label="Mode selector">
                    <div class="view-bar">
                        <div class="view-tabs" role="tablist">
                            <button class="view-btn is-active" data-view="calculator" role="tab" data-i18n="view.calculator">Калькулятор</button>
                            <button class="view-btn" data-view="mathlab" role="tab" data-i18n="view.mathlab">Матем. лабораторія</button>
                        </div>
                        <div class="lang-picker">
                            <label class="sr-only" for="lang-select">Language</label>
                            <select id="lang-select" class="lang-select" aria-label="Language">
                                <option value="uk">UA</option>
                                <option value="en">EN</option>
                            </select>
                        </div>
                    </div>
                </header>

                <section class="panel view-panel calculator-panel is-active" data-view-panel="calculator" aria-label="Scientific Calculator">
                    <header class="flex items-center justify-between mb-4">
                        <div>
                            <p class="text-xs text-slate-50" data-i18n="app.subtitle">Науковий калькулятор</p>
                            <h1 class="font-display text-2xl" data-i18n="app.title">Калькулятор</h1>
                        </div>
                        <div class="chip" data-i18n="app.chip">Інженерний</div>
                    </header>
                    <input class="display" id="display" type="text" value="" readonly />
                    <div class="grid gap-2 grid-cols-4" id="calc-grid">
                        <button class="btn btn-func" data-action="clear" title="Clear">AC</button>
                        <button class="btn btn-func" data-action="back" title="Delete last">DEL</button>
                        <button class="btn btn-func" data-value="(">(</button>
                        <button class="btn btn-func" data-value=")">)</button>

                        <button class="btn btn-sci" data-value="sin(" title="Sine">sin</button>
                        <button class="btn btn-sci" data-value="cos(" title="Cosine">cos</button>
                        <button class="btn btn-sci" data-value="tan(" title="Tangent">tan</button>
                        <button class="btn btn-sci" data-value="cot(" title="Cotangent">ctg</button>

                        <button class="btn btn-sci" data-value="log(" title="Log base 10">log</button>
                        <button class="btn btn-sci" data-value="ln(" title="Natural log">ln</button>
                        <button class="btn btn-sci" data-value="sqrt(" title="Square root">sqrt</button>
                        <button class="btn btn-op" data-value="/">/</button>

                        <button class="btn" data-value="7">7</button>
                        <button class="btn" data-value="8">8</button>
                        <button class="btn" data-value="9">9</button>
                        <button class="btn btn-op" data-value="*">*</button>

                        <button class="btn" data-value="4">4</button>
                        <button class="btn" data-value="5">5</button>
                        <button class="btn" data-value="6">6</button>
                        <button class="btn btn-op" data-value="+">+</button>

                        <button class="btn" data-value="1">1</button>
                        <button class="btn" data-value="2">2</button>
                        <button class="btn" data-value="3">3</button>
                        <button class="btn btn-sci" data-value="^" title="Power">x^y</button>

                        <button class="btn btn-wide" data-value="0">0</button>
                        <button class="btn" data-value=".">.</button>
                        <button class="btn btn-sci" data-value="pi" title="Pi">pi</button>
                        <button class="btn btn-sci btn-wide" data-value="e" title="Euler">e</button>

                        <button class="btn btn-eq" data-action="equals">=</button>
                    </div>
                </section>

                <section class="panel view-panel" data-view-panel="mathlab" aria-label="Math Lab">
                    <header class="flex flex-wrap items-center justify-between gap-3 mb-4">
                        <div>
                            <p class="text-xs text-slate-400" data-i18n="mathlab.subtitle">Матем. лабораторія</p>
                            <h2 class="font-display text-2xl" data-i18n="mathlab.title">Графіки, Матриці, Похідні</h2>
                            <p class="helper" data-i18n="mathlab.helper">Оберіть вкладку та виконайте короткі кроки нижче.</p>
                        </div>
                        <div class="tab-row" role="tablist">
                            <button class="tab-btn is-active" data-tab="graph" role="tab" data-i18n="tab.graph">Графік</button>
                            <button class="tab-btn" data-tab="matrix" role="tab" data-i18n="tab.matrix">Матриці</button>
                            <button class="tab-btn" data-tab="derivative" role="tab" data-i18n="tab.derivative">Похідна</button>
                            <button class="tab-btn" data-tab="sum" role="tab" data-i18n="tab.sum">Сума (Σ)</button>
                            <button class="tab-btn" data-tab="integral" role="tab" data-i18n="tab.integral">Інтеграл (∫)</button>
                        </div>
                    </header>

                    <div class="panel-stack">
                        <div class="tab-panel is-active" id="panel-graph" role="tabpanel">
                            <div class="graph-unified-section">
                                <div class="graph-controls-panel">
                                    <div class="graph-header">
                                        <h3 class="graph-title" data-i18n="graph.title">Графік функції</h3>
                                    </div>
                                    
                                    <div class="graph-input-item">
                                        <label class="panel-label" data-i18n="graph.label">y = f(x)</label>
                                        <div class="input-with-example">
                                            <input id="graph-input" class="field" value="sin(x)" placeholder="Введіть функцію" />
                                            <span class="input-hint">Приклади: sin(x); cos(x); x^2</span>
                                        </div>
                                    </div>

                                    <div class="graph-input-item">
                                        <label class="panel-label" data-i18n="graph.range">Діапазон осі X</label>
                                        <div class="range-inputs">
                                            <div class="range-input-group">
                                                <label class="range-label">Від:</label>
                                                <input id="graph-min" class="field" value="-10" />
                                            </div>
                                            <div class="range-input-group">
                                                <label class="range-label">До:</label>
                                                <input id="graph-max" class="field" value="10" />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="graph-input-item">
                                        <label class="panel-label" data-i18n="graph.multiple">Декілька функцій</label>
                                        <input id="graph-multiple" class="field" placeholder="sin(x); cos(x); x/2" />
                                        <span class="input-hint" data-i18n="graph.multipleHint">Через ; (крапку з комою)</span>
                                    </div>

                                    <div class="form-actions">
                                        <button class="btn btn-op" id="graph-plot" data-i18n="graph.plot">Побудувати</button>
                                    </div>
                                    <p class="status" id="graph-status"></p>
                                    <div class="graph-legend" id="graph-legend"></div>
                                </div>

                                <div class="graph-canvas-panel">
                                    <canvas id="graph-canvas" height="420"></canvas>
                                </div>
                            </div>
                        </div>

                        <div class="tab-panel" id="panel-matrix" role="tabpanel">
                            <div class="panel-grid matrix-grid">
                                <div class="panel-block">
                                    <div class="matrix-size-selector">
                                        <label class="panel-label" data-i18n="matrix.size">Розмір матриці</label>
                                        <div class="size-buttons">
                                            <button class="size-btn is-active" data-size="2">2×2</button>
                                            <button class="size-btn" data-size="3">3×3</button>
                                            <button class="size-btn" data-size="4">4×4</button>
                                            <button class="size-btn" data-size="5">5×5</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="panel-block">
                                    <label class="panel-label" data-i18n="matrix.labelA">Матриця A</label>
                                    <div class="matrix-container" id="matrix-a-container">
                                        <!-- Динамічно створюється через JS -->
                                    </div>
                                </div>
                                
                                <div class="panel-block">
                                    <label class="panel-label" data-i18n="matrix.labelB">Матриця B</label>
                                    <div class="matrix-container" id="matrix-b-container">
                                        <!-- Динамічно створюється через JS -->
                                    </div>
                                </div>
                                
                                <div class="panel-block">
                                    <label class="panel-label" data-i18n="matrix.operation">Операція</label>
                                    <div class="matrix-actions">
                                        <button class="btn btn-func" data-matrix="add">A + B</button>
                                        <button class="btn btn-func" data-matrix="mul">A × B</button>
                                        <button class="btn btn-func" data-matrix="det">det(A)</button>
                                    </div>
                                    <label class="panel-label mt-3" data-i18n="matrix.result">Результат</label>
                                    <div class="matrix-container" id="matrix-result-container">
                                        <!-- Результат -->
                                    </div>
                                    <p class="status" id="matrix-status"></p>
                                </div>
                            </div>
                        </div>

                        <div class="tab-panel" id="panel-derivative" role="tabpanel">
                            <div class="math-section derivative-section">
                                <div class="math-header">
                                    <h3 class="math-title">Обчислення Похідної</h3>
                                    <div class="math-formula">f'(x)</div>
                                </div>

                                <div class="math-input-section">
                                    <div class="panel-block">
                                        <label class="panel-label" data-i18n="deriv.label">f(x)</label>
                                        <input id="deriv-fx" class="field" value="x^2 + 2*x" placeholder="x^2 + 2*x" />
                                        <p class="helper" data-i18n="deriv.example">Приклад: x^2 + 2*x</p>
                                    </div>
                                    <div class="panel-block">
                                        <div class="form-grid">
                                            <div>
                                                <label class="panel-label" data-i18n="deriv.x0">x₀:</label>
                                                <input id="deriv-x" class="field" value="2" placeholder="2" />
                                            </div>
                                            <div>
                                                <label class="panel-label" data-i18n="deriv.h">h (крок):</label>
                                                <input id="deriv-h" class="field" value="0.00001" placeholder="0.00001" />
                                            </div>
                                        </div>
                                        <p class="helper" data-i18n="deriv.step">Крок h для центральної різниці</p>
                                    </div>

                                    <div class="form-actions">
                                        <button class="btn btn-op" id="deriv-calc" data-i18n="deriv.calc">f'(x₀) Обчислити похідну</button>
                                    </div>
                                    <p class="status" id="deriv-status"></p>
                                </div>

                                <div class="result-section">
                                    <label class="panel-label">f'(x₀) =</label>
                                    <div class="result-box result-large" id="deriv-result">---</div>
                                    <div class="result-info" id="deriv-info"></div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-panel" id="panel-sum" role="tabpanel">
                            <div class="math-section sum-section">
                                <div class="math-header">
                                    <h3 class="math-title">Обчислення Суми</h3>
                                    <div class="math-formula">∑ f(n)</div>
                                </div>

                                <div class="math-input-section">
                                    <div class="panel-block">
                                        <label class="panel-label" data-i18n="sum.label">f(n) - вираз</label>
                                        <div class="input-with-formula">
                                            <span class="formula-prefix">f(n) =</span>
                                            <input id="sum-expr" class="field" value="1/(n^2)" placeholder="Введіть вираз через n" />
                                        </div>
                                        <p class="helper" data-i18n="sum.example">Приклад: 1/(n^2), 2*n+1, n^3</p>
                                    </div>

                                    <div class="sum-range-block">
                                        <div class="range-grid">
                                            <div class="range-item">
                                                <label class="panel-label" data-i18n="sum.start">Початок (n):</label>
                                                <input id="sum-start" class="field" value="1" placeholder="1" />
                                                <span class="range-symbol">↓</span>
                                            </div>
                                            <div class="range-item">
                                                <label class="panel-label" data-i18n="sum.end">Кінець (n):</label>
                                                <input id="sum-end" class="field" value="10" placeholder="100" />
                                                <span class="range-symbol">↑</span>
                                            </div>
                                        </div>
                                        <p class="helper" data-i18n="sum.range">Діапазон: від першого до останнього значення</p>
                                    </div>

                                    <div class="form-actions">
                                        <button class="btn btn-op" id="sum-calc" data-i18n="sum.calc">∑ Обчислити суму</button>
                                    </div>
                                    <p class="status" id="sum-status"></p>
                                </div>

                                <div class="result-section">
                                    <label class="panel-label">Результат:</label>
                                    <div class="result-box result-large" id="sum-result">---</div>
                                    <div class="result-info" id="sum-info"></div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-panel" id="panel-integral" role="tabpanel">
                            <div class="math-section integral-section">
                                <div class="math-header">
                                    <h3 class="math-title">Обчислення Інтеграла</h3>
                                    <div class="math-formula">∫ f(x) dx</div>
                                </div>

                                <div class="math-input-section">
                                    <div class="panel-block">
                                        <label class="panel-label" data-i18n="integral.label">f(x) - функція</label>
                                        <div class="input-with-formula">
                                            <span class="formula-prefix">∫</span>
                                            <input id="integral-expr" class="field" value="x^2" placeholder="Введіть функцію через x" />
                                            <span class="formula-suffix">dx</span>
                                        </div>
                                        <p class="helper" data-i18n="integral.example">Приклад: x^2, sin(x), e^x, 1/x</p>
                                    </div>

                                    <div class="integral-range-block">
                                        <div class="range-grid">
                                            <div class="range-item">
                                                <label class="panel-label" data-i18n="integral.lower">Нижня межа (a):</label>
                                                <input id="integral-lower" class="field" value="0" placeholder="0" />
                                                <span class="range-symbol">a</span>
                                            </div>
                                            <div class="range-item">
                                                <label class="panel-label" data-i18n="integral.upper">Верхня межа (b):</label>
                                                <input id="integral-upper" class="field" value="2" placeholder="2" />
                                                <span class="range-symbol">b</span>
                                            </div>
                                        </div>
                                        <p class="helper" data-i18n="integral.range">Визначений інтеграл: від a до b</p>
                                    </div>

                                    <div class="integral-precision-block">
                                        <label class="panel-label" data-i18n="integral.precision">Точність (розбиття):</label>
                                        <div class="precision-inputs">
                                            <input id="integral-steps" class="field field-small" value="1000" type="number" min="10" max="10000" />
                                            <span class="precision-hint">точок для обчислення</span>
                                        </div>
                                        <p class="helper" data-i18n="integral.precisionHint">Більше значення = точніше, але повільніше</p>
                                    </div>

                                    <div class="form-actions">
                                        <button class="btn btn-op" id="integral-calc" data-i18n="integral.calc">∫ Обчислити інтеграл</button>
                                    </div>
                                    <p class="status" id="integral-status"></p>
                                </div>

                                <div class="result-section">
                                    <label class="panel-label">Результат:</label>
                                    <div class="result-box result-large" id="integral-result">---</div>
                                    <div class="result-info" id="integral-info"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <script src="https://cdn.jsdelivr.net/npm/mathjs@11.11.2/lib/browser/math.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
        <script src="script.js"></script>
    </body>
</html>
